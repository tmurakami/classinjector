task javadoc(type: Javadoc) {
    androidVariants.matching { it.name == 'release' }.all {
        dependsOn tasks["prepare${name.capitalize()}Dependencies"]
        source += javaCompile.source
        classpath += files(android.bootClasspath, javaCompile.classpath)
    }
    excludes = ['**/BuildConfig.java', '**/R.java']
    options.links 'https://developer.android.com/reference/'
}

apply from: "$rootDir/gradle/javadoc-common.gradle"
