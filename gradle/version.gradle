ext.version_name = new ByteArrayOutputStream().withStream { out ->
    if (exec {
        ignoreExitValue = true
        commandLine 'git describe'.split()
        standardOutput = out
        errorOutput = new ByteArrayOutputStream()
    }.exitValue) {
        'unspecified'
    } else {
        def result = out.toString().trim()
        def tag = result.split('-')[0]
        def (major, minor, patch) = tag.split('\\.')
        result == tag ? tag : "$major.$minor.${(patch as int) + 1}-SNAPSHOT"
    }
}
